trigger:
  branches:
    include:
      - dev
pool:
  name: 'Default'

steps:
- checkout: self
- script: |
    echo "üîê Logging in to Azure CLI..."
    az login --service-principal \
      -u $AZURE_CLIENT_ID \
      -p $AZURE_CLIENT_SECRET \
      --tenant $AZURE_TENANT_ID
  displayName: 'Azure CLI Login and Terraform Init'
- script: |
    cd iac/azure/env/dev
    terraform init
  displayName: 'Terraform Init'

- script: |
    cd iac/azure/env/dev
    terraform plan
  displayName: 'Terraform Plan'
