trigger:
  branches:
    include:
      - dev
pool:
  name: 'Default'

steps:
- checkout: self
- script: |
    echo "üîê Logging in to Azure CLI..."
    az login --service-principal -u 137c40cd-769a-4a05-a9a5-0e704688e080 -p 8HU8Q~jdiNdeh3SgtElTG22No4ix09gimnrPzaPd --tenant e6661ddb-733b-4277-9ae4-d76861358b5c
  displayName: 'Azure CLI Login and Terraform Init'
- script: |
    cd iac/azure/env/dev
    terraform init
  displayName: 'Terraform Init'

- script: |
    cd iac/azure/env/dev
    terraform plan
  displayName: 'Terraform Plan'
